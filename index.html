<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tính Chỉ Số BMI - Kiểm Tra Sức Khỏe</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .bmi-indicator {
            transition: all 0.5s ease;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <!-- Header -->
    <header class="glass-effect shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-heartbeat text-3xl text-purple-600"></i>
                    <h1 class="text-2xl font-bold text-gray-800">BMI Calculator</h1>
                </div>
                <nav class="hidden md:flex space-x-6">
                    <a href="#calculator" class="text-gray-700 hover:text-purple-600 transition">Tính BMI</a>
                    <a href="#info" class="text-gray-700 hover:text-purple-600 transition">Thông tin</a>
                    <a href="#history" class="text-gray-700 hover:text-purple-600 transition">Lịch sử</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Hero Section -->
        <section class="text-center mb-12 fade-in">
            <h2 class="text-4xl md:text-5xl font-bold text-white mb-4">
                Kiểm Tra Sức Khỏe Với Chỉ Số BMI
            </h2>
            <p class="text-xl text-purple-100 max-w-2xl mx-auto">
                Tính chỉ số BMI của bạn để biết tình trạng cân nặng và nhận lời khuyên sức khỏe phù hợp
            </p>
        </section>

        <!-- Calculator Section -->
        <section id="calculator" class="max-w-4xl mx-auto mb-12">
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Input Form -->
                <div class="glass-effect rounded-2xl p-8 shadow-xl">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-6">
                        <i class="fas fa-calculator text-purple-600 mr-2"></i>
                        Nhập Thông Tin
                    </h3>
                    
                    <form id="bmiForm" class="space-y-6">
                        <!-- Unit Selection -->
                        <div class="flex space-x-4 mb-4">
                            <label class="flex items-center cursor-pointer">
                                <input type="radio" name="unit" value="metric" checked class="mr-2 text-purple-600">
                                <span class="text-gray-700">Metric (cm, kg)</span>
                            </label>
                            <label class="flex items-center cursor-pointer">
                                <input type="radio" name="unit" value="imperial" class="mr-2 text-purple-600">
                                <span class="text-gray-700">Imperial (inches, lbs)</span>
                            </label>
                        </div>

                        <!-- Height Input -->
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">
                                <i class="fas fa-ruler-vertical text-purple-500 mr-2"></i>
                                Chiều cao
                            </label>
                            <div class="relative">
                                <input type="number" 
                                       id="height" 
                                       class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-purple-500 focus:outline-none transition"
                                       placeholder="170"
                                       step="0.1"
                                       min="50"
                                       max="250">
                                <span id="heightUnit" class="absolute right-4 top-3 text-gray-500">cm</span>
                            </div>
                        </div>

                        <!-- Weight Input -->
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">
                                <i class="fas fa-weight text-purple-500 mr-2"></i>
                                Cân nặng
                            </label>
                            <div class="relative">
                                <input type="number" 
                                       id="weight" 
                                       class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-purple-500 focus:outline-none transition"
                                       placeholder="65"
                                       step="0.1"
                                       min="20"
                                       max="300">
                                <span id="weightUnit" class="absolute right-4 top-3 text-gray-500">kg</span>
                            </div>
                        </div>

                        <!-- Age and Gender -->
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">
                                    <i class="fas fa-birthday-cake text-purple-500 mr-2"></i>
                                    Tuổi
                                </label>
                                <input type="number" 
                                       id="age" 
                                       class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-purple-500 focus:outline-none transition"
                                       placeholder="25"
                                       min="1"
                                       max="120">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">
                                    <i class="fas fa-venus-mars text-purple-500 mr-2"></i>
                                    Giới tính
                                </label>
                                <select id="gender" class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-purple-500 focus:outline-none transition">
                                    <option value="">Chọn</option>
                                    <option value="male">Nam</option>
                                    <option value="female">Nữ</option>
                                </select>
                            </div>
                        </div>

                        <!-- Calculate Button -->
                        <button type="submit" 
                                class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold py-4 rounded-lg hover:shadow-lg transform hover:scale-105 transition duration-300">
                            <i class="fas fa-chart-line mr-2"></i>
                            Tính BMI Ngay
                        </button>
                    </form>
                </div>

                <!-- Result Display -->
                <div class="glass-effect rounded-2xl p-8 shadow-xl">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-6">
                        <i class="fas fa-chart-pie text-purple-600 mr-2"></i>
                        Kết Quả
                    </h3>
                    
                    <div id="resultContainer" class="hidden">
                        <!-- BMI Value -->
                        <div class="text-center mb-6">
                            <div class="text-6xl font-bold text-purple-600 mb-2" id="bmiValue">0</div>
                            <div class="text-xl text-gray-600" id="bmiCategory">-</div>
                        </div>

                        <!-- BMI Indicator -->
                        <div class="relative h-8 bg-gradient-to-r from-blue-400 via-green-400 via-yellow-400 via-orange-400 to-red-400 rounded-full mb-6">
                            <div id="bmiIndicator" class="absolute top-1/2 transform -translate-y-1/2 w-6 h-6 bg-white border-4 border-gray-800 rounded-full bmi-indicator"></div>
                        </div>

                        <!-- BMI Scale Labels -->
                        <div class="flex justify-between text-xs text-gray-600 mb-6">
                            <span>15</span>
                            <span>18.5</span>
                            <span>25</span>
                            <span>30</span>
                            <span>40+</span>
                        </div>

                        <!-- Health Advice -->
                        <div class="bg-purple-50 rounded-lg p-4 mb-4">
                            <h4 class="font-semibold text-purple-800 mb-2">
                                <i class="fas fa-lightbulb mr-2"></i>
                                Lời khuyên sức khỏe
                            </h4>
                            <p id="healthAdvice" class="text-gray-700 text-sm"></p>
                        </div>

                        <!-- Ideal Weight Range -->
                        <div class="bg-blue-50 rounded-lg p-4">
                            <h4 class="font-semibold text-blue-800 mb-2">
                                <i class="fas fa-bullseye mr-2"></i>
                                Cân nặng lý tưởng
                            </h4>
                            <p id="idealWeight" class="text-gray-700 text-sm"></p>
                        </div>
                    </div>

                    <!-- Placeholder when no result -->
                    <div id="placeholder" class="text-center py-12">
                        <i class="fas fa-calculator text-6xl text-gray-300 mb-4"></i>
                        <p class="text-gray-500">Nhập thông tin để tính chỉ số BMI của bạn</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- BMI Categories Info -->
        <section id="info" class="max-w-4xl mx-auto mb-12">
            <div class="glass-effect rounded-2xl p-8 shadow-xl">
                <h3 class="text-2xl font-semibold text-gray-800 mb-6">
                    <i class="fas fa-info-circle text-purple-600 mr-2"></i>
                    Phân Loại BMI
                </h3>
                
                <div class="grid md:grid-cols-5 gap-4">
                    <div class="text-center p-4 bg-blue-50 rounded-lg">
                        <div class="text-2xl font-bold text-blue-600">&lt; 18.5</div>
                        <div class="text-sm text-gray-700 mt-2">Thiếu cân</div>
                        <i class="fas fa-arrow-down text-blue-400 mt-2"></i>
                    </div>
                    <div class="text-center p-4 bg-green-50 rounded-lg">
                        <div class="text-2xl font-bold text-green-600">18.5 - 24.9</div>
                        <div class="text-sm text-gray-700 mt-2">Bình thường</div>
                        <i class="fas fa-check text-green-400 mt-2"></i>
                    </div>
                    <div class="text-center p-4 bg-yellow-50 rounded-lg">
                        <div class="text-2xl font-bold text-yellow-600">25 - 29.9</div>
                        <div class="text-sm text-gray-700 mt-2">Thừa cân</div>
                        <i class="fas fa-exclamation text-yellow-400 mt-2"></i>
                    </div>
                    <div class="text-center p-4 bg-orange-50 rounded-lg">
                        <div class="text-2xl font-bold text-orange-600">30 - 34.9</div>
                        <div class="text-sm text-gray-700 mt-2">Béo phì độ I</div>
                        <i class="fas fa-exclamation-triangle text-orange-400 mt-2"></i>
                    </div>
                    <div class="text-center p-4 bg-red-50 rounded-lg">
                        <div class="text-2xl font-bold text-red-600">≥ 35</div>
                        <div class="text-sm text-gray-700 mt-2">Béo phì độ II+</div>
                        <i class="fas fa-times text-red-400 mt-2"></i>
                    </div>
                </div>
            </div>
        </section>

        <!-- History Section -->
        <section id="history" class="max-w-4xl mx-auto mb-12">
            <div class="glass-effect rounded-2xl p-8 shadow-xl">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-semibold text-gray-800">
                        <i class="fas fa-history text-purple-600 mr-2"></i>
                        Lịch Sử Tính Toán
                    </h3>
                    <button id="clearHistory" class="text-red-500 hover:text-red-700 transition">
                        <i class="fas fa-trash mr-2"></i>
                        Xóa tất cả
                    </button>
                </div>
                
                <div id="historyList" class="space-y-3">
                    <p class="text-gray-500 text-center py-8">Chưa có lịch sử tính toán</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="glass-effect mt-12">
        <div class="container mx-auto px-4 py-6">
            <div class="text-center text-gray-700">
                <p>&copy; 2024 BMI Calculator. Được tạo với <i class="fas fa-heart text-red-500"></i> để chăm sóc sức khỏe của bạn.</p>
            </div>
        </div>
    </footer>

    <script>
        // BMI Calculator JavaScript
        let history = JSON.parse(localStorage.getItem('bmiHistory')) || [];

        // Unit conversion
        document.querySelectorAll('input[name="unit"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const heightUnit = document.getElementById('heightUnit');
                const weightUnit = document.getElementById('weightUnit');
                const heightInput = document.getElementById('height');
                const weightInput = document.getElementById('weight');
                
                if (this.value === 'imperial') {
                    heightUnit.textContent = 'inches';
                    weightUnit.textContent = 'lbs';
                    heightInput.placeholder = '67';
                    weightInput.placeholder = '143';
                    heightInput.min = '20';
                    heightInput.max = '100';
                    weightInput.min = '44';
                    weightInput.max = '660';
                } else {
                    heightUnit.textContent = 'cm';
                    weightUnit.textContent = 'kg';
                    heightInput.placeholder = '170';
                    weightInput.placeholder = '65';
                    heightInput.min = '50';
                    heightInput.max = '250';
                    weightInput.min = '20';
                    weightInput.max = '300';
                }
            });
        });

        // Form submission
        document.getElementById('bmiForm').addEventListener('submit', function(e) {
            e.preventDefault();
            calculateBMI();
        });

        function calculateBMI() {
            const unit = document.querySelector('input[name="unit"]:checked').value;
            let height = parseFloat(document.getElementById('height').value);
            let weight = parseFloat(document.getElementById('weight').value);
            const age = parseInt(document.getElementById('age').value);
            const gender = document.getElementById('gender').value;

            if (!height || !weight) {
                showNotification('Vui lòng nhập đầy đủ chiều cao và cân nặng!', 'error');
                return;
            }

            // Convert to metric if needed
            if (unit === 'imperial') {
                height = height * 2.54; // inches to cm
                weight = weight * 0.453592; // lbs to kg
            }

            // Calculate BMI
            const heightInMeters = height / 100;
            const bmi = weight / (heightInMeters * heightInMeters);

            // Display result
            displayResult(bmi, height, weight, age, gender);

            // Save to history
            saveToHistory(bmi, height, weight, age, gender);
        }

        function displayResult(bmi, height, weight, age, gender) {
            const resultContainer = document.getElementById('resultContainer');
            const placeholder = document.getElementById('placeholder');
            const bmiValue = document.getElementById('bmiValue');
            const bmiCategory = document.getElementById('bmiCategory');
            const bmiIndicator = document.getElementById('bmiIndicator');
            const healthAdvice = document.getElementById('healthAdvice');
            const idealWeight = document.getElementById('idealWeight');

            // Show result container
            resultContainer.classList.remove('hidden');
            placeholder.classList.add('hidden');

            // Display BMI value
            bmiValue.textContent = bmi.toFixed(1);

            // Determine category and color
            let category, advice, color;
            if (bmi < 18.5) {
                category = 'Thiếu cân';
                advice = 'Bạn cần tăng cân. Hãy ăn đủ chất, tập thể dục đều đặn để tăng cơ bắp. Tăng cường các nhóm thực phẩm giàu protein và calo lành mạnh.';
                color = 'blue';
            } else if (bmi < 25) {
                category = 'Bình thường';
                advice = 'Chúc mừng! Bạn có cân nặng lý tưởng. Hãy duy trì chế độ ăn uống cân bằng và tập thể dục thường xuyên để giữ gìn sức khỏe.';
                color = 'green';
            } else if (bmi < 30) {
                category = 'Thừa cân';
                advice = 'Bạn cần giảm một ít cân. Hãy tăng cường vận động, giảm calo tiêu thụ và ăn nhiều rau xanh, trái cây.';
                color = 'yellow';
            } else if (bmi < 35) {
                category = 'Béo phì độ I';
                advice = 'Bạn nên giảm cân. Hãy tham khảo ý kiến bác sĩ để có kế hoạch giảm cân phù hợp. Kết hợp ăn uống lành mạnh và tập luyện đều đặn.';
                color = 'orange';
            } else {
                category = 'Béo phì độ II+';
                advice = 'Bạn cần giảm cân ngay lập tức. Hãy gặp bác sĩ để được tư vấn chuyên sâu. Tình trạng béo phì có thể gây nhiều bệnh nguy hiểm.';
                color = 'red';
            }

            bmiCategory.textContent = category;
            bmiCategory.className = `text-xl font-semibold text-${color}-600`;
            healthAdvice.textContent = advice;

            // Calculate ideal weight
            const heightInMeters = height / 100;
            const minIdealWeight = 18.5 * heightInMeters * heightInMeters;
            const maxIdealWeight = 24.9 * heightInMeters * heightInMeters;
            idealWeight.textContent = `${minIdealWeight.toFixed(1)} - ${maxIdealWeight.toFixed(1)} kg`;

            // Position indicator
            const indicatorPosition = Math.min(Math.max((bmi - 15) / 25 * 100, 0), 100);
            bmiIndicator.style.left = `${indicatorPosition}%`;

            // Add animation
            resultContainer.classList.add('fade-in');
        }

        function saveToHistory(bmi, height, weight, age, gender) {
            const record = {
                date: new Date().toLocaleString('vi-VN'),
                bmi: bmi.toFixed(1),
                height: height,
                weight: weight,
                age: age,
                gender: gender
            };

            history.unshift(record);
            if (history.length > 10) history.pop(); // Keep only last 10 records

            localStorage.setItem('bmiHistory', JSON.stringify(history));
            updateHistoryDisplay();
        }

        function updateHistoryDisplay() {
            const historyList = document.getElementById('historyList');
            
            if (history.length === 0) {
                historyList.innerHTML = '<p class="text-gray-500 text-center py-8">Chưa có lịch sử tính toán</p>';
                return;
            }

            historyList.innerHTML = history.map((record, index) => `
                <div class="flex justify-between items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition">
                    <div class="flex-1">
                        <div class="font-semibold text-gray-800">BMI: ${record.bmi}</div>
                        <div class="text-sm text-gray-600">${record.date}</div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm text-gray-600">Cao: ${record.height}cm | Nặng: ${record.weight}kg</div>
                        ${record.age ? `<div class="text-sm text-gray-600">Tuổi: ${record.age}</div>` : ''}
                    </div>
                </div>
            `).join('');
        }

        // Clear history
        document.getElementById('clearHistory').addEventListener('click', function() {
            if (confirm('Bạn có chắc muốn xóa tất cả lịch sử?')) {
                history = [];
                localStorage.removeItem('bmiHistory');
                updateHistoryDisplay();
                showNotification('Đã xóa lịch sử!', 'success');
            }
        });

        // Notification function
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `fixed top-20 right-4 px-6 py-3 rounded-lg shadow-lg z-50 fade-in ${
                type === 'error' ? 'bg-red-500' : 'bg-green-500'
            } text-white`;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Initialize history display
        updateHistoryDisplay();

        // Smooth scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });
    </script>
</body>
</html>